{% extends 'base.html' %}

{% block content %}
  <h1>마이페이지</h1>
  <p>아이디: {{ user.id }}</p>

  <h2>프로필 정보</h2>
  <form method="post">
    {% csrf_token %}
    {{ form.as_p }}
    <button type="submit">저장</button>
  </form>

  <h2>내가 작성한 글</h2>
  <ul>
    {% for post in posts %}
      <li><a href="{% url 'post_detail' post.site.site_name post.category.category_name post.id %}">{{ post.title }}</a> - {{ post.created_at }}</li>
    {% endfor %}
  </ul>

  <h2>내가 작성한 댓글</h2>
  <ul>
    {% for comment in comments %}
      <li>{{ comment.content }} (on <a href="{% url 'post_detail' comment.post.site.site_name comment.post.category.category_name comment.post.id %}">{{ comment.post.title }}</a>) - {{ comment.create_at }}</li>
    {% endfor %}
  </ul>
{% endblock %}